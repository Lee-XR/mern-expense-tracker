import{P as b,j as e,r as c,S as E,u as w,n as C,o as D,p as H,q as T,t as M,L as P,v as B,w as O}from"./index-7c90dd95.js";const R="_parent_1m24t_1",q="_container_1m24t_33",F="_container-shadow_1m24t_55",S={parent:R,container:q,"container-shadow":"_container-shadow_1m24t_55",containerShadow:F},G=s=>e.jsxs("div",{className:S.parent,children:[e.jsx("div",{className:S.container,children:s.children}),e.jsx("div",{className:S.containerShadow})]});G.propTypes={children:b.node};const I=(s,t)=>{const{sheetsDispatch:n}=c.useContext(E),u=w(),p=C(),m={_id:s,user_id:t};return async()=>{await D.post(`sheet/sheets/${s}/delete`,m).then(a=>{a.data.success&&(n({type:"DELETE_SHEETS",_id:s}),p("Sheet Deleted","The sheet has been succesfully deleted."))}).catch(a=>{u(a)})}},y=[3154e4,2628e3,604800,86400,3600,60],K=["year","month","week","day","hour","minute"],V=s=>{const t=Math.floor((new Date-new Date(s))/1e3);for(let n=0;n<y.length;n++)if(t>y[n])return Math.floor(t/y[n])+` ${K[n]}(s)`;return t+" seconds(s)"},z="_container_16l1b_1",J="_content_16l1b_27",Q="_timestamp_16l1b_31",W="_title_16l1b_43",h={container:z,content:J,timestamp:Q,title:W},X=s=>{const{sheet:t}=s,{sheetsDispatch:n}=c.useContext(E),u=H(),p=w(),m=C(),[a,i]=c.useState(t.title),[x,v]=c.useState(a),[o,r]=c.useState(!1),g=[{name:"View",icon:"visibility",callback:()=>{u(`../sheets/${t._id}`)}},{name:"Rename",icon:"edit",callback:()=>{r(!o)}},{name:"Delete",icon:"delete",callback:I(t._id,t.user_id)}],N={top:"8px",right:"4px"},$=T(t.records,"debit"),k=T(t.records,"credit"),U=V(t.updatedAt),_=O(),A=async l=>{if(l.keyCode===13&&l.code==="Enter"){r(!1);const L={...t,title:l.target.value};await D.patch(`sheet/sheets/${t._id}`,L).then(d=>{if(d.data.success){const f=d.data.sheet;n({type:"UPDATE_SHEETS",payload:f}),i(f.title),v(f.title),m("Sheet Title Updated","The sheet title has been successfully updated.")}}).catch(d=>{p(d)})}},j=M(()=>{i(x),r(!1)});return c.useEffect(()=>{i(t.title),v(t.title)},[t]),c.useEffect(()=>{o&&j.current.focus()},[o,j]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:h.container,children:[o?e.jsx("input",{type:"text",placeholder:"Sheet Title",value:a,disabled:!o,ref:j,onChange:l=>i(l.target.value),onBlur:()=>{i(x),r(!1)},onKeyDown:A}):e.jsxs(P,{to:`../sheets/${t._id}`,className:h.title,children:[e.jsx("span",{children:a||"Untitled"}),e.jsx("span",{className:"material-symbols-outlined",children:"open_in_new"})]}),e.jsxs("div",{className:h.content,children:[e.jsxs("div",{children:[e.jsx("span",{children:"Debit (+): "}),e.jsx("span",{children:_($)})]}),e.jsxs("div",{children:[e.jsx("span",{children:"Credit (-): "}),e.jsx("span",{children:_(k)})]}),e.jsxs("div",{children:[e.jsx("span",{children:"Balance : "}),e.jsx("span",{children:_(t.balance.$numberDecimal)})]})]}),e.jsx("div",{className:h.timestamp,children:e.jsxs("span",{children:["Last Updated: ",U," ago"]})}),e.jsx(B,{settingsMenuPosition:N,settingsMenuOptions:g})]})})};X.propTypes={sheet:b.object};export{G as C,X as S};
